<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>Sniper J GM æ¨¡æ“¬å™¨ v0.5</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f2f2f2; }
    h1 { color: #2c3e50; }
    button { margin: 5px; padding: 10px; font-size: 16px; border-radius: 5px; }
    .player { background: white; margin: 10px 0; padding: 10px; border-radius: 6px; }
    .section { margin-top: 30px; }
    select { padding: 5px 10px; margin-top: 10px; }
    .disabled { opacity: 0.5; pointer-events: none; }
  </style>
</head>
<body>
  <h1>ğŸ€ Sniper J GM æ¨¡æ“¬å™¨ v0.5</h1>
  <div>ğŸ—“ï¸ ä»Šæ—¥ï¼š<span id="dayCounter">ç¬¬ 1 å¤©</span></div>

  <div class="section">
    <button id="btnShowWarriors">é¡¯ç¤ºå‹‡å£«éšŠçƒå“¡</button>
    <button id="btnShowFreeAgents">è‡ªç”±å¸‚å ´</button>
    <button id="btnSelectTeam">æŸ¥çœ‹å…¶ä»–éšŠä¼</button>
    <button id="btnSimulateGame">æ¨¡æ“¬æ¯”è³½</button>
    <button id="btnNextDay">ğŸ“† å‰å¾€ä¸‹ä¸€å¤©</button>
    <div id="teamSelectArea"></div>
  </div>

  <div id="team"></div>
  <div id="freeAgents"></div>
  <div id="otherTeam"></div>
  <div id="gameResult"></div>

<script>
let day = 1;

const warriors = [
  { name: "Stephen Curry", rating: "S", trainedToday: false },
  { name: "Klay Thompson", rating: "B+", trainedToday: false },
  { name: "Draymond Green", rating: "B", trainedToday: false },
  { name: "Jonathan Kuminga", rating: "B", trainedToday: false },
  { name: "Andrew Wiggins", rating: "B+", trainedToday: false },
  { name: "Moses Moody", rating: "C+", trainedToday: false }
];

const freeAgents = [
  { name: "Malik Beasley", rating: "B", signChance: 60 },
  { name: "Robert Covington", rating: "B-", signChance: 50 },
  { name: "Will Barton", rating: "C+", signChance: 80 },
  { name: "Kelly Oubre Jr.", rating: "B", signChance: 70 }
];

const otherTeams = {
  "é›·éœ†": [
    { name: "Shai Gilgeous-Alexander", rating: "S" },
    { name: "Jalen Williams", rating: "A" },
    { name: "Chet Holmgren", rating: "A-" }
  ],
  "ç°ç‹¼": [
    { name: "Anthony Edwards", rating: "S" },
    { name: "Rudy Gobert", rating: "B+" },
    { name: "Karl-Anthony Towns", rating: "A" }
  ],
  "é‡‘å¡Š": [
    { name: "Nikola Jokic", rating: "S+" },
    { name: "Jamal Murray", rating: "A" },
    { name: "Aaron Gordon", rating: "B+" }
  ]
};

function updateDayDisplay() {
  document.getElementById("dayCounter").innerText = `ç¬¬ ${day} å¤©`;
}

function showWarriors() {
  const container = document.getElementById("team");
  container.innerHTML = "<h2>å‹‡å£«éšŠé™£å®¹</h2>";
  warriors.forEach((player, index) => {
    const btnDisabled = player.trainedToday ? 'disabled' : '';
    const trainedText = player.trainedToday ? 'ï¼ˆä»Šæ—¥å·²è¨“ç·´ï¼‰' : '';
    container.innerHTML += `
      <div class="player">
        <strong>${player.name}</strong> - è©•åƒ¹ï¼š${player.rating} ${trainedText}<br />
        <button ${btnDisabled} onclick="trainPlayer(${index})">è¨“ç·´</button>
        <button onclick="initiateTrade(${index})">äº¤æ˜“ä»–éšŠçƒå“¡</button>
      </div>
    `;
  });
}

function getAverageRating() {
  const map = {"C":1,"C+":2,"B-":3,"B":4,"B+":5,"A-":6,"A":7,"A+":8,"S":9,"S+":10};
  return warriors.reduce((t,p)=>t+(map[p.rating]||1), 0) / warriors.length;
}

function showFreeAgents() {
  const container = document.getElementById("freeAgents");
  container.innerHTML = "<h2>å¯ç°½è‡ªç”±çƒå“¡</h2>";
  const avg = Math.floor(getAverageRating());
  freeAgents.forEach((player, index) => {
    const chance = Math.min(95, player.signChance + avg);
    container.innerHTML += `
      <div class="player">
        <strong>${player.name}</strong> - è©•åƒ¹ï¼š${player.rating}ï¼ˆæ©Ÿç‡ï¼šç´„ ${chance}%ï¼‰<br />
        <button onclick="signPlayer(${index}, ${chance})">ç°½ä¸‹</button>
      </div>
    `;
  });
}

function trainPlayer(index) {
  const ratings = ["C","C+","B-","B","B+","A-","A","A+","S","S+"];
  let current = warriors[index].rating;
  let i = ratings.indexOf(current);
  if (i < ratings.length - 1) {
    warriors[index].rating = ratings[i+1];
    warriors[index].trainedToday = true;
    alert(`${warriors[index].name} è©•åƒ¹æå‡è‡³ ${warriors[index].rating}`);
  } else {
    alert(`${warriors[index].name} å·²é”æœ€é«˜è©•åƒ¹ï¼`);
  }
  showWarriors();
}

function signPlayer(index, chance) {
  const rand = Math.random() * 100;
  if (rand <= chance) {
    warriors.push({...freeAgents[index], trainedToday: false});
    alert(`${freeAgents[index].name} åŠ å…¥å‹‡å£«ï¼`);
    freeAgents.splice(index, 1);
  } else {
    alert(`${freeAgents[index].name} æ‹’çµ•åŠ å…¥...`);
  }
  showWarriors();
  showFreeAgents();
}

function selectTeam() {
  const area = document.getElementById("teamSelectArea");
  area.innerHTML = `
    <h2>é¸æ“‡ä¸€æ”¯çƒéšŠï¼š</h2>
    <select id="teamSelect">
      <option value="">è«‹é¸æ“‡</option>
      ${Object.keys(otherTeams).map(t => `<option value="${t}">${t}</option>`).join("")}
    </select>
    <div id="selectedTeamPlayers"></div>
  `;
  document.getElementById("teamSelect").addEventListener("change", e => {
    const team = e.target.value;
    const div = document.getElementById("selectedTeamPlayers");
    if (!team) return div.innerHTML = "";
    const players = otherTeams[team];
    div.innerHTML = `<h3>${team} çƒå“¡</h3>`;
    players.forEach((p, i) => {
      div.innerHTML += `
        <div class="player">
          <strong>${p.name}</strong> - è©•åƒ¹ï¼š${p.rating}<br />
          <button onclick="completeTrade('${team}', ${i})">ç™¼èµ·äº¤æ˜“</button>
        </div>
      `;
    });
  });
}

function initiateTrade(index) {
  alert("è«‹ä½¿ç”¨ã€æŸ¥çœ‹å…¶ä»–éšŠä¼ã€ä¸¦é»æ“Šç™¼èµ·äº¤æ˜“æŒ‰éˆ•ã€‚");
}

function completeTrade(team, index) {
  const target = otherTeams[team][index];
  const names = warriors.map(p => p.name).join("\n");
  const input = prompt(`è¦ç”¨å“ªä½å‹‡å£«çƒå“¡æ› ${target.name}ï¼Ÿ\n\n${names}`);
  const i = warriors.findIndex(p => p.name === input);
  if (i === -1) return alert("æ‰¾ä¸åˆ°é€™ä½å‹‡å£«çƒå“¡ï¼");
  const traded = warriors[i];
  warriors[i] = target;
  otherTeams[team][index] = traded;
  alert(`äº¤æ˜“æˆåŠŸï¼${traded.name} â¡ï¸ ${team}ï¼Œ${target.name} åŠ å…¥å‹‡å£«ï¼`);
  showWarriors();
  selectTeam();
}

function simulateGame() {
  const ratingToScore = {"C":5,"C+":7,"B-":9,"B":10,"B+":12,"A-":14,"A":15,"A+":17,"S":18,"S+":20};
  const oppNames = Object.keys(otherTeams);
  const team = oppNames[Math.floor(Math.random()*oppNames.length)];
  const opp = otherTeams[team];
  let score1 = 0, score2 = 0, mvp = null, best = -1;
  warriors.forEach(p => {
    const perf = Math.floor((ratingToScore[p.rating] || 8) + Math.random()*6);
    score1 += perf;
    if (perf > best) { best = perf; mvp = p.name; }
  });
  opp.forEach(p => score2 += Math.floor((ratingToScore[p.rating]||8) + Math.random()*6));
  document.getElementById("gameResult").innerHTML = `
    <h2>æ¯”è³½çµæœ ğŸ€</h2>
    <p>å‹‡å£« vs ${team}</p>
    <p>æ¯”åˆ†ï¼š<strong>${score1} - ${score2}</strong></p>
    <p>${score1 > score2 ? "ğŸ‰ å‹‡å£«ç²å‹ï¼" : "ğŸ˜¢ å‹‡å£«è½æ•—..."}</p>
    <p>MVPï¼š${mvp}ï¼ˆ${best}åˆ†ï¼‰</p>
  `;
}

function nextDay() {
  day++;
  warriors.forEach(p => p.trainedToday = false);
  updateDayDisplay();
  alert("æ–°çš„ä¸€å¤©é–‹å§‹äº†ï¼Œæ‰€æœ‰çƒå“¡å¯å†æ¬¡è¨“ç·´ï¼");
  showWarriors();
}
</script>

<script>
  document.getElementById("btnShowWarriors").addEventListener("click", showWarriors);
  document.getElementById("btnShowFreeAgents").addEventListener("click", showFreeAgents);
  document.getElementById("btnSelectTeam").addEventListener("click", selectTeam);
  document.getElementById("btnSimulateGame").addEventListener("click", simulateGame);
  document.getElementById("btnNextDay").addEventListener("click", nextDay);
  updateDayDisplay();
</script>
</body>
</html>
