<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>Sniper J GM æ¨¡æ“¬å™¨ v0.3</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f2f2f2; }
    h1 { color: #2c3e50; }
    button { margin: 5px; padding: 10px; font-size: 16px; border-radius: 5px; }
    .player { background: white; margin: 10px 0; padding: 10px; border-radius: 6px; }
    .section { margin-top: 30px; }
    select { padding: 5px 10px; margin-top: 10px; }
    .disabled { opacity: 0.5; pointer-events: none; }
  </style>
</head>
<body>
  <h1>ğŸ€ Sniper J GM æ¨¡æ“¬å™¨ v0.3</h1>

  <div class="section">
    <button onclick="showWarriors()">é¡¯ç¤ºå‹‡å£«éšŠçƒå“¡</button>
    <button onclick="showFreeAgents()">è‡ªç”±å¸‚å ´</button>
    <button onclick="selectTeam()">æŸ¥çœ‹å…¶ä»–éšŠä¼</button>
    <button onclick="simulateGame()">æ¨¡æ“¬æ¯”è³½</button>
    <button onclick="resetTraining()">é‡ç½®è¨“ç·´æ—¥</button>
    <div id="teamSelectArea"></div>
  </div>

  <div id="team"></div>
  <div id="freeAgents"></div>
  <div id="otherTeam"></div>
  <div id="gameResult"></div>

  <script>
    const warriors = [
      { name: "Stephen Curry", rating: "S", trained: false },
      { name: "Klay Thompson", rating: "B+", trained: false },
      { name: "Draymond Green", rating: "B", trained: false },
      { name: "Jonathan Kuminga", rating: "B", trained: false },
      { name: "Andrew Wiggins", rating: "B+", trained: false },
      { name: "Moses Moody", rating: "C+", trained: false }
    ];

    const freeAgents = [
      { name: "Malik Beasley", rating: "B", signChance: 60 },
      { name: "Robert Covington", rating: "B-", signChance: 50 },
      { name: "Will Barton", rating: "C+", signChance: 80 },
      { name: "Kelly Oubre Jr.", rating: "B", signChance: 70 }
    ];

    const otherTeams = {
      "é›·éœ†": [
        { name: "Shai Gilgeous-Alexander", rating: "S" },
        { name: "Jalen Williams", rating: "A" },
        { name: "Chet Holmgren", rating: "A-" }
      ],
      "ç°ç‹¼": [
        { name: "Anthony Edwards", rating: "S" },
        { name: "Rudy Gobert", rating: "B+" },
        { name: "Karl-Anthony Towns", rating: "A" }
      ],
      "é‡‘å¡Š": [
        { name: "Nikola Jokic", rating: "S+" },
        { name: "Jamal Murray", rating: "A" },
        { name: "Aaron Gordon", rating: "B+" }
      ],
      "ç°ç†Š": [
        { name: "Ja Morant", rating: "S" },
        { name: "Jaren Jackson Jr.", rating: "A" },
        { name: "Desmond Bane", rating: "A-" }
      ],
      "ç†±ç«": [
        { name: "Bam Adebayo", rating: "A+" },
        { name: "Tyler Herro", rating: "A-" },
        { name: "Jaime Jaquez Jr.", rating: "B+" }
      ]
    };

    function getAverageRating() {
      const map = { "C": 1, "C+": 2, "B-": 3, "B": 4, "B+": 5, "A-": 6, "A": 7, "A+": 8, "S": 9, "S+": 10 };
      let total = 0;
      warriors.forEach(p => total += map[p.rating] || 1);
      return total / warriors.length;
    }

    function showWarriors() {
      const container = document.getElementById("team");
      container.innerHTML = "<h2>å‹‡å£«éšŠé™£å®¹</h2>";
      warriors.forEach((p, i) => {
        const disabled = p.trained ? "disabled" : "";
        const tag = p.trained ? "ï¼ˆå·²è¨“ç·´ï¼‰" : "";
        container.innerHTML += `
          <div class="player">
            <strong>${p.name}</strong> - è©•åƒ¹ï¼š${p.rating} ${tag}<br />
            <button class="${disabled}" onclick="trainPlayer(${i})">è¨“ç·´</button>
            <button onclick="tradePlayer(${i})">äº¤æ˜“ä»–éšŠçƒå“¡</button>
          </div>
        `;
      });
    }

    function trainPlayer(index) {
      if (warriors[index].trained) return;
      const ratingList = ["C", "C+", "B-", "B", "B+", "A-", "A", "A+", "S", "S+"];
      let current = warriors[index].rating;
      let idx = ratingList.indexOf(current);
      if (idx < ratingList.length - 1) {
        warriors[index].rating = ratingList[idx + 1];
        warriors[index].trained = true;
        alert(`${warriors[index].name} è¨“ç·´æˆåŠŸï¼è©•åƒ¹å‡ç‚º ${warriors[index].rating}`);
      } else {
        alert(`${warriors[index].name} å·²é”æœ€é«˜è©•åƒ¹ï¼`);
      }
      showWarriors();
    }

    function resetTraining() {
      warriors.forEach(p => p.trained = false);
      alert("è¨“ç·´æ—¥å·²é‡ç½®ï¼");
      showWarriors();
    }

    function showFreeAgents() {
      const container = document.getElementById("freeAgents");
      container.innerHTML = "<h2>å¯ç°½è‡ªç”±çƒå“¡</h2>";
      const avg = getAverageRating();
      freeAgents.forEach((p, i) => {
        const chance = Math.min(95, p.signChance + Math.floor(avg));
        container.innerHTML += `
          <div class="player">
            <strong>${p.name}</strong> - è©•åƒ¹ï¼š${p.rating}ï¼ˆç°½ç´„æ©Ÿç‡ç´„ ${chance}%ï¼‰<br />
            <button onclick="signPlayer(${i}, ${chance})">ç°½ä¸‹</button>
          </div>
        `;
      });
    }

    function signPlayer(index, chance) {
      const rand = Math.random() * 100;
      if (rand <= chance) {
        warriors.push({ ...freeAgents[index], trained: false });
        alert(`${freeAgents[index].name} åŠ å…¥å‹‡å£«ï¼`);
        freeAgents.splice(index, 1);
      } else {
        alert(`${freeAgents[index].name} æ‹’çµ•åŠ å…¥ä½ çš„çƒéšŠã€‚`);
      }
      showWarriors();
      showFreeAgents();
    }

    function selectTeam() {
      const area = document.getElementById("teamSelectArea");
      area.innerHTML = `
        <h2>é¸æ“‡ä¸€æ”¯çƒéšŠï¼š</h2>
        <select onchange="showOtherTeam(this.value)">
          <option value="">è«‹é¸æ“‡</option>
          ${Object.keys(otherTeams).map(t => `<option value="${t}">${t}</option>`).join("")}
        </select>
      `;
    }

    function showOtherTeam(team) {
      if (!team) return;
      const players = otherTeams[team];
      const container = document.getElementById("otherTeam");
      container.innerHTML = `<h2>${team} çƒå“¡</h2>`;
      players.forEach((p, i) => {
        container.innerHTML += `
          <div class="player">
            <strong>${p.name}</strong> - è©•åƒ¹ï¼š${p.rating}<br />
            <button onclick="tradeFor('${team}', ${i})">ç™¼èµ·äº¤æ˜“</button>
          </div>
        `;
      });
    }

    function tradePlayer(index) {
      alert("è«‹å…ˆé¸æ“‡å…¶ä»–éšŠä¼ä¸¦å¾è©²éšŠç™¼èµ·äº¤æ˜“ï¼");
    }

    function tradeFor(team, index) {
      const otherPlayer = otherTeams[team][index];
      const input = prompt(`ä½ è¦ç”¨å“ªä½å‹‡å£«çƒå“¡æ› ${otherPlayer.name}ï¼Ÿ\n${warriors.map(w => w.name).join("\n")}`);
      const wIndex = warriors.findIndex(w => w.name === input);
      if (wIndex >= 0) {
        const myPlayer = warriors[wIndex];
        warriors[wIndex] = otherPlayer;
        otherTeams[team][index] = myPlayer;
        alert(`äº¤æ˜“æˆåŠŸï¼ä½ ç”¨ ${myPlayer.name} æ›ä¾†äº† ${otherPlayer.name}`);
        showWarriors();
        showOtherTeam(team);
      } else {
        alert("æ‰¾ä¸åˆ°é€™ä½å‹‡å£«çƒå“¡ï¼Œè«‹ç¢ºèªåç¨±æ‹¼å°ï¼");
      }
    }

    function simulateGame() {
      const ratingToScore = {
        "C": 5, "C+": 7, "B-": 9, "B": 10, "B+": 12,
        "A-": 14, "A": 15, "A+": 17, "S": 18, "S+": 20
      };
      const teams = Object.keys(otherTeams);
      const oppTeam = teams[Math.floor(Math.random() * teams.length)];
      const oppPlayers = otherTeams[oppTeam];
      let myScore = 0, oppScore = 0;
      let mvp = "", top = 0;

      warriors.forEach(p => {
        const perf = Math.floor((ratingToScore[p.rating] || 10) + Math.random() * 6);
        myScore += perf;
        if (perf > top) {
          top = perf;
          mvp = p.name;
        }
      });

      oppPlayers.forEach(p => {
        oppScore += Math.floor((ratingToScore[p.rating] || 10) + Math.random() * 6);
      });

      const result = document.getElementById("gameResult");
      result.innerHTML = `
        <h2>æ¨¡æ“¬æ¯”è³½çµæœ ğŸ€</h2>
        <p>å‹‡å£« vs ${oppTeam}</p>
        <p>æ¯”åˆ†ï¼š<strong>${myScore} - ${oppScore}</strong></p>
        <p>${myScore > oppScore ? "ğŸ‰ å‹‡å£«å‹åˆ©ï¼" : "ğŸ˜¢ å‹‡å£«è½æ•—..."}</p>
        <p>MVPï¼š${mvp}ï¼ˆå¾—åˆ† ${top}ï¼‰</p>
      `;
    }
  </script>
</body>
</html>
